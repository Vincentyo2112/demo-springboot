<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <p th:text="${user}"> adfhj </p>
    <div class="input-group">
      <span class="input-group-text" id="visible-addon">@</span>
      <input id="username"
        type="text"
        class="form-control"
        placeholder="Username"
        aria-label="Username"
        aria-describedby="visible-addon"
      />
      <input
        type="text"
        class="form-control d-none"
        placeholder="Hidden input"
        aria-label="Hidden input"
        aria-describedby="visible-addon"
      />
    </div>
    <div class="input-group">
      <span class="input-group-text" id="visible-addon">@</span>
      <input id="password"
        type="password"
        class="form-control"
        placeholder="password"
        aria-describedby="visible-addon"
      />
      <input
        type="password"
        class="form-control d-none"
        placeholder="Hidden input"
        aria-describedby="visible-addon"
      />
      <button class="btn btn-primary" onclick="login()">Login</button>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script>

        async function login() {
            var user = $("#username").val();
            var pass = $("#password").val();
            
            var res = await $.ajax({
                url: "/user/login",
                type: "POST",
                data: {
                    user: user,
                    pass: pass
                }
            });

            if ("user" in res) {
                alert(`Ban la ${res.user.username}`)
            } else {
                alert(res.message);
            }
        }
    </script>
  </body>
</html>
